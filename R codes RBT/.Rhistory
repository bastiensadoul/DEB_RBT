wanted = data.frame(chronic_stress=chronic_stress, CONDITION=CONDITION, boldorshy_based_on_median=boldorshy_based_on_median)
wantedtot=wanted
wantedtot$BAC.ECOTOL2=10
for (BAC.ECOTOL2 in c(11:12)){
wantedtemp=wanted
wantedtemp$BAC.ECOTOL2=BAC.ECOTOL2
wantedtot=rbind(wantedtot,
wantedtemp)
}
wantedtot$testnum = rep(1:12, each=8)
####  Put in each line of wantedtot a TAG number still available and having the correct details
wantedtot$TAG="NA"
tempdispo=dispo
for (i in c(1:nrow(wantedtot))){
avail=tempdispo[which(tempdispo$CONDITION==as.character(wantedtot[i, "CONDITION"]) &
tempdispo$chronic_stress==wantedtot[i, "chronic_stress"] &
tempdispo$boldorshy_based_on_median==wantedtot[i, "boldorshy_based_on_median"]&
tempdispo$BAC.ECOTOL2==wantedtot[i, "BAC.ECOTOL2"]),]
pickrandom=sample(avail$TAG, 1)
wantedtot[i,"TAG"]=pickrandom
tempdispo=tempdispo[-which(tempdispo$TAG==pickrandom),]
}
length(unique(wantedtot$TAG))
# Verif
temp=merge(dispo, wantedtot)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
# save
# write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
rm(list=ls())
cat("\014")  # To clear the console
# dir="/Users/Bastien/Google Drive/Post doc ifremer/SUSHIFISH/WP2 et 3"
dir=dirname(rstudioapi::getActiveDocumentContext()$path)     # gets the name of the directory of the active script (works only in R studio)
dir=gsub("/SCRIPTS R/Data management", "", dir)
fish=read.table(paste(dir, "/Managed data/history.txt", sep=""), sep="\t", dec=",", header=T)
length(fish[which(!is.na(fish$BAC.ECOTOL2)),1])
############################ Remove dead fish
fish$dead=NA
fish[grep("65986972", fish$TAG), "dead"]="20.10.2017"
fish[grep("3831213|3588164", fish$TAG), "dead"]="23.10.2017"
fish[grep("6438984|65986707|6461887", fish$TAG), "dead"]="24.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("365987312|6462437", fish$TAG), "dead"]="15.11.2017"
fish[grep("365987673", fish$TAG), "dead"]="17.11.2017"
fish[grep("3831570", fish$TAG), "dead"]="23.11.2017"
fish[grep("3831489", fish$TAG), "dead"]="24.11.2017"
fish[grep("365986732|6452560", fish$TAG), "dead"]="29.11.2017"
fish[grep("365986864", fish$TAG), "dead"]="30.11.2017"
fish[grep("6457385", fish$TAG), "dead"]="01.12.2017"
fish[grep("6564712", fish$TAG), "dead"]="04.12.2017"
fish[grep("3588112", fish$TAG), "dead"]="05.12.2017"
fish[grep("3717270|365986408", fish$TAG), "dead"]="07.12.2017"
fish[grep("6429199|365987186", fish$TAG), "dead"]="11.12.2017"
dispo=fish[which(!is.na(fish$BAC.ECOTOL2)),]
dispo=dispo[which(is.na(dispo$dead)),]
############################ Repartition pour tracking (8 par condition 11 et 13 et par stress chronique)
####  Create table I want
chronic_stress=c(rep("yes", 8), rep("no", 8), rep("yes", 8), rep("no", 8))
boldorshy_based_on_median=c(rep(c(rep("bold", 4), rep("shy", 4)), 4))
CONDITION=c(rep("11", 16), rep("13.5", 16))
wanted = data.frame(chronic_stress=chronic_stress, CONDITION=CONDITION, boldorshy_based_on_median=boldorshy_based_on_median)
wantedtot=wanted
wantedtot$BAC.ECOTOL2=10
for (BAC.ECOTOL2 in c(11:12)){
wantedtemp=wanted
wantedtemp$BAC.ECOTOL2=BAC.ECOTOL2
wantedtot=rbind(wantedtot,
wantedtemp)
}
wantedtot$testnum = rep(1:12, each=8)
####  Put in each line of wantedtot a TAG number still available and having the correct details
wantedtot$TAG="NA"
tempdispo=dispo
for (i in c(1:nrow(wantedtot))){
avail=tempdispo[which(tempdispo$CONDITION==as.character(wantedtot[i, "CONDITION"]) &
tempdispo$chronic_stress==wantedtot[i, "chronic_stress"] &
tempdispo$boldorshy_based_on_median==wantedtot[i, "boldorshy_based_on_median"]&
tempdispo$BAC.ECOTOL2==wantedtot[i, "BAC.ECOTOL2"]),]
pickrandom=sample(avail$TAG, 1)
wantedtot[i,"TAG"]=pickrandom
tempdispo=tempdispo[-which(tempdispo$TAG==pickrandom),]
}
length(unique(wantedtot$TAG))
# Verif
temp=merge(dispo, wantedtot)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
# save
# write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
rm(list=ls())
cat("\014")  # To clear the console
# dir="/Users/Bastien/Google Drive/Post doc ifremer/SUSHIFISH/WP2 et 3"
dir=dirname(rstudioapi::getActiveDocumentContext()$path)     # gets the name of the directory of the active script (works only in R studio)
dir=gsub("/SCRIPTS R/Data management", "", dir)
fish=read.table(paste(dir, "/Managed data/history.txt", sep=""), sep="\t", dec=",", header=T)
length(fish[which(!is.na(fish$BAC.ECOTOL2)),1])
############################ Remove dead fish
fish$dead=NA
fish[grep("65986972", fish$TAG), "dead"]="20.10.2017"
fish[grep("3831213|3588164", fish$TAG), "dead"]="23.10.2017"
fish[grep("6438984|65986707|6461887", fish$TAG), "dead"]="24.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("365987312|6462437", fish$TAG), "dead"]="15.11.2017"
fish[grep("365987673", fish$TAG), "dead"]="17.11.2017"
fish[grep("3831570", fish$TAG), "dead"]="23.11.2017"
fish[grep("3831489", fish$TAG), "dead"]="24.11.2017"
fish[grep("365986732|6452560", fish$TAG), "dead"]="29.11.2017"
fish[grep("365986864", fish$TAG), "dead"]="30.11.2017"
fish[grep("6457385", fish$TAG), "dead"]="01.12.2017"
fish[grep("6564712", fish$TAG), "dead"]="04.12.2017"
fish[grep("3588112", fish$TAG), "dead"]="05.12.2017"
fish[grep("3717270|365986408", fish$TAG), "dead"]="07.12.2017"
fish[grep("6429199|365987186", fish$TAG), "dead"]="11.12.2017"
dispo=fish[which(!is.na(fish$BAC.ECOTOL2)),]
dispo=dispo[which(is.na(dispo$dead)),]
############################ Repartition pour tracking (8 par condition 11 et 13 et par stress chronique)
####  Create table I want
chronic_stress=c(rep("yes", 8), rep("no", 8), rep("yes", 8), rep("no", 8))
boldorshy_based_on_median=c(rep(c(rep("bold", 4), rep("shy", 4)), 4))
CONDITION=c(rep("11", 16), rep("13.5", 16))
wanted = data.frame(chronic_stress=chronic_stress, CONDITION=CONDITION, boldorshy_based_on_median=boldorshy_based_on_median)
wantedtot=wanted
wantedtot$BAC.ECOTOL2=10
for (BAC.ECOTOL2 in c(11:12)){
wantedtemp=wanted
wantedtemp$BAC.ECOTOL2=BAC.ECOTOL2
wantedtot=rbind(wantedtot,
wantedtemp)
}
wantedtot$testnum = rep(1:12, each=8)
####  Put in each line of wantedtot a TAG number still available and having the correct details
wantedtot$TAG="NA"
tempdispo=dispo
for (i in c(1:nrow(wantedtot))){
avail=tempdispo[which(tempdispo$CONDITION==as.character(wantedtot[i, "CONDITION"]) &
tempdispo$chronic_stress==wantedtot[i, "chronic_stress"] &
tempdispo$boldorshy_based_on_median==wantedtot[i, "boldorshy_based_on_median"]&
tempdispo$BAC.ECOTOL2==wantedtot[i, "BAC.ECOTOL2"]),]
pickrandom=sample(avail$TAG, 1)
wantedtot[i,"TAG"]=pickrandom
tempdispo=tempdispo[-which(tempdispo$TAG==pickrandom),]
}
length(unique(wantedtot$TAG))
# Verif
temp=merge(dispo, wantedtot)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
# save
# write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
rm(list=ls())
cat("\014")  # To clear the console
# dir="/Users/Bastien/Google Drive/Post doc ifremer/SUSHIFISH/WP2 et 3"
dir=dirname(rstudioapi::getActiveDocumentContext()$path)     # gets the name of the directory of the active script (works only in R studio)
dir=gsub("/SCRIPTS R/Data management", "", dir)
fish=read.table(paste(dir, "/Managed data/history.txt", sep=""), sep="\t", dec=",", header=T)
length(fish[which(!is.na(fish$BAC.ECOTOL2)),1])
############################ Remove dead fish
fish$dead=NA
fish[grep("65986972", fish$TAG), "dead"]="20.10.2017"
fish[grep("3831213|3588164", fish$TAG), "dead"]="23.10.2017"
fish[grep("6438984|65986707|6461887", fish$TAG), "dead"]="24.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("365987312|6462437", fish$TAG), "dead"]="15.11.2017"
fish[grep("365987673", fish$TAG), "dead"]="17.11.2017"
fish[grep("3831570", fish$TAG), "dead"]="23.11.2017"
fish[grep("3831489", fish$TAG), "dead"]="24.11.2017"
fish[grep("365986732|6452560", fish$TAG), "dead"]="29.11.2017"
fish[grep("365986864", fish$TAG), "dead"]="30.11.2017"
fish[grep("6457385", fish$TAG), "dead"]="01.12.2017"
fish[grep("6564712", fish$TAG), "dead"]="04.12.2017"
fish[grep("3588112", fish$TAG), "dead"]="05.12.2017"
fish[grep("3717270|365986408", fish$TAG), "dead"]="07.12.2017"
fish[grep("6429199|365987186", fish$TAG), "dead"]="11.12.2017"
dispo=fish[which(!is.na(fish$BAC.ECOTOL2)),]
dispo=dispo[which(is.na(dispo$dead)),]
############################ Repartition pour tracking (8 par condition 11 et 13 et par stress chronique)
####  Create table I want
chronic_stress=c(rep("yes", 8), rep("no", 8), rep("yes", 8), rep("no", 8))
boldorshy_based_on_median=c(rep(c(rep("bold", 4), rep("shy", 4)), 4))
CONDITION=c(rep("11", 16), rep("13.5", 16))
wanted = data.frame(chronic_stress=chronic_stress, CONDITION=CONDITION, boldorshy_based_on_median=boldorshy_based_on_median)
wantedtot=wanted
wantedtot$BAC.ECOTOL2=10
for (BAC.ECOTOL2 in c(11:12)){
wantedtemp=wanted
wantedtemp$BAC.ECOTOL2=BAC.ECOTOL2
wantedtot=rbind(wantedtot,
wantedtemp)
}
wantedtot$testnum = rep(1:12, each=8)
####  Put in each line of wantedtot a TAG number still available and having the correct details
wantedtot$TAG="NA"
tempdispo=dispo
for (i in c(1:nrow(wantedtot))){
avail=tempdispo[which(tempdispo$CONDITION==as.character(wantedtot[i, "CONDITION"]) &
tempdispo$chronic_stress==wantedtot[i, "chronic_stress"] &
tempdispo$boldorshy_based_on_median==wantedtot[i, "boldorshy_based_on_median"]&
tempdispo$BAC.ECOTOL2==wantedtot[i, "BAC.ECOTOL2"]),]
pickrandom=sample(avail$TAG, 1)
wantedtot[i,"TAG"]=pickrandom
tempdispo=tempdispo[-which(tempdispo$TAG==pickrandom),]
}
length(unique(wantedtot$TAG))
# Verif
temp=merge(dispo, wantedtot)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
# save
# write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
rm(list=ls())
cat("\014")  # To clear the console
# dir="/Users/Bastien/Google Drive/Post doc ifremer/SUSHIFISH/WP2 et 3"
dir=dirname(rstudioapi::getActiveDocumentContext()$path)     # gets the name of the directory of the active script (works only in R studio)
dir=gsub("/SCRIPTS R/Data management", "", dir)
fish=read.table(paste(dir, "/Managed data/history.txt", sep=""), sep="\t", dec=",", header=T)
length(fish[which(!is.na(fish$BAC.ECOTOL2)),1])
############################ Remove dead fish
fish$dead=NA
fish[grep("65986972", fish$TAG), "dead"]="20.10.2017"
fish[grep("3831213|3588164", fish$TAG), "dead"]="23.10.2017"
fish[grep("6438984|65986707|6461887", fish$TAG), "dead"]="24.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("365987312|6462437", fish$TAG), "dead"]="15.11.2017"
fish[grep("365987673", fish$TAG), "dead"]="17.11.2017"
fish[grep("3831570", fish$TAG), "dead"]="23.11.2017"
fish[grep("3831489", fish$TAG), "dead"]="24.11.2017"
fish[grep("365986732|6452560", fish$TAG), "dead"]="29.11.2017"
fish[grep("365986864", fish$TAG), "dead"]="30.11.2017"
fish[grep("6457385", fish$TAG), "dead"]="01.12.2017"
fish[grep("6564712", fish$TAG), "dead"]="04.12.2017"
fish[grep("3588112", fish$TAG), "dead"]="05.12.2017"
fish[grep("3717270|365986408", fish$TAG), "dead"]="07.12.2017"
fish[grep("6429199|365987186", fish$TAG), "dead"]="11.12.2017"
dispo=fish[which(!is.na(fish$BAC.ECOTOL2)),]
dispo=dispo[which(is.na(dispo$dead)),]
############################ Repartition pour tracking (8 par condition 11 et 13 et par stress chronique)
####  Create table I want
chronic_stress=c(rep("yes", 8), rep("no", 8), rep("yes", 8), rep("no", 8))
boldorshy_based_on_median=c(rep(c(rep("bold", 4), rep("shy", 4)), 4))
CONDITION=c(rep("11", 16), rep("13.5", 16))
wanted = data.frame(chronic_stress=chronic_stress, CONDITION=CONDITION, boldorshy_based_on_median=boldorshy_based_on_median)
wantedtot=wanted
wantedtot$BAC.ECOTOL2=10
for (BAC.ECOTOL2 in c(11:12)){
wantedtemp=wanted
wantedtemp$BAC.ECOTOL2=BAC.ECOTOL2
wantedtot=rbind(wantedtot,
wantedtemp)
}
wantedtot$testnum = rep(1:12, each=8)
####  Put in each line of wantedtot a TAG number still available and having the correct details
wantedtot$TAG="NA"
tempdispo=dispo
for (i in c(1:nrow(wantedtot))){
avail=tempdispo[which(tempdispo$CONDITION==as.character(wantedtot[i, "CONDITION"]) &
tempdispo$chronic_stress==wantedtot[i, "chronic_stress"] &
tempdispo$boldorshy_based_on_median==wantedtot[i, "boldorshy_based_on_median"]&
tempdispo$BAC.ECOTOL2==wantedtot[i, "BAC.ECOTOL2"]),]
pickrandom=sample(avail$TAG, 1)
wantedtot[i,"TAG"]=pickrandom
tempdispo=tempdispo[-which(tempdispo$TAG==pickrandom),]
}
length(unique(wantedtot$TAG))
# Verif
temp=merge(dispo, wantedtot)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
# save
# write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
rm(list=ls())
cat("\014")  # To clear the console
# dir="/Users/Bastien/Google Drive/Post doc ifremer/SUSHIFISH/WP2 et 3"
dir=dirname(rstudioapi::getActiveDocumentContext()$path)     # gets the name of the directory of the active script (works only in R studio)
dir=gsub("/SCRIPTS R/Data management", "", dir)
fish=read.table(paste(dir, "/Managed data/history.txt", sep=""), sep="\t", dec=",", header=T)
length(fish[which(!is.na(fish$BAC.ECOTOL2)),1])
############################ Remove dead fish
fish$dead=NA
fish[grep("65986972", fish$TAG), "dead"]="20.10.2017"
fish[grep("3831213|3588164", fish$TAG), "dead"]="23.10.2017"
fish[grep("6438984|65986707|6461887", fish$TAG), "dead"]="24.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("365987312|6462437", fish$TAG), "dead"]="15.11.2017"
fish[grep("365987673", fish$TAG), "dead"]="17.11.2017"
fish[grep("3831570", fish$TAG), "dead"]="23.11.2017"
fish[grep("3831489", fish$TAG), "dead"]="24.11.2017"
fish[grep("365986732|6452560", fish$TAG), "dead"]="29.11.2017"
fish[grep("365986864", fish$TAG), "dead"]="30.11.2017"
fish[grep("6457385", fish$TAG), "dead"]="01.12.2017"
fish[grep("6564712", fish$TAG), "dead"]="04.12.2017"
fish[grep("3588112", fish$TAG), "dead"]="05.12.2017"
fish[grep("3717270|365986408", fish$TAG), "dead"]="07.12.2017"
fish[grep("6429199|365987186", fish$TAG), "dead"]="11.12.2017"
dispo=fish[which(!is.na(fish$BAC.ECOTOL2)),]
dispo=dispo[which(is.na(dispo$dead)),]
############################ Repartition pour tracking (8 par condition 11 et 13 et par stress chronique)
####  Create table I want
chronic_stress=c(rep("yes", 8), rep("no", 8), rep("yes", 8), rep("no", 8))
boldorshy_based_on_median=c(rep(c(rep("bold", 4), rep("shy", 4)), 4))
CONDITION=c(rep("11", 16), rep("13.5", 16))
wanted = data.frame(chronic_stress=chronic_stress, CONDITION=CONDITION, boldorshy_based_on_median=boldorshy_based_on_median)
wantedtot=wanted
wantedtot$BAC.ECOTOL2=10
for (BAC.ECOTOL2 in c(11:12)){
wantedtemp=wanted
wantedtemp$BAC.ECOTOL2=BAC.ECOTOL2
wantedtot=rbind(wantedtot,
wantedtemp)
}
wantedtot$testnum = rep(1:12, each=8)
####  Put in each line of wantedtot a TAG number still available and having the correct details
wantedtot$TAG="NA"
tempdispo=dispo
for (i in c(1:nrow(wantedtot))){
avail=tempdispo[which(tempdispo$CONDITION==as.character(wantedtot[i, "CONDITION"]) &
tempdispo$chronic_stress==wantedtot[i, "chronic_stress"] &
tempdispo$boldorshy_based_on_median==wantedtot[i, "boldorshy_based_on_median"]&
tempdispo$BAC.ECOTOL2==wantedtot[i, "BAC.ECOTOL2"]),]
pickrandom=sample(avail$TAG, 1)
wantedtot[i,"TAG"]=pickrandom
tempdispo=tempdispo[-which(tempdispo$TAG==pickrandom),]
}
length(unique(wantedtot$TAG))
# Verif
temp=merge(dispo, wantedtot)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
# save
# write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
rm(list=ls())
cat("\014")  # To clear the console
# dir="/Users/Bastien/Google Drive/Post doc ifremer/SUSHIFISH/WP2 et 3"
dir=dirname(rstudioapi::getActiveDocumentContext()$path)     # gets the name of the directory of the active script (works only in R studio)
dir=gsub("/SCRIPTS R/Data management", "", dir)
fish=read.table(paste(dir, "/Managed data/history.txt", sep=""), sep="\t", dec=",", header=T)
length(fish[which(!is.na(fish$BAC.ECOTOL2)),1])
############################ Remove dead fish
fish$dead=NA
fish[grep("65986972", fish$TAG), "dead"]="20.10.2017"
fish[grep("3831213|3588164", fish$TAG), "dead"]="23.10.2017"
fish[grep("6438984|65986707|6461887", fish$TAG), "dead"]="24.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("365987312|6462437", fish$TAG), "dead"]="15.11.2017"
fish[grep("365987673", fish$TAG), "dead"]="17.11.2017"
fish[grep("3831570", fish$TAG), "dead"]="23.11.2017"
fish[grep("3831489", fish$TAG), "dead"]="24.11.2017"
fish[grep("365986732|6452560", fish$TAG), "dead"]="29.11.2017"
fish[grep("365986864", fish$TAG), "dead"]="30.11.2017"
fish[grep("6457385", fish$TAG), "dead"]="01.12.2017"
fish[grep("6564712", fish$TAG), "dead"]="04.12.2017"
fish[grep("3588112", fish$TAG), "dead"]="05.12.2017"
fish[grep("3717270|365986408", fish$TAG), "dead"]="07.12.2017"
fish[grep("6429199|365987186", fish$TAG), "dead"]="11.12.2017"
dispo=fish[which(!is.na(fish$BAC.ECOTOL2)),]
dispo=dispo[which(is.na(dispo$dead)),]
############################ Repartition pour tracking (8 par condition 11 et 13 et par stress chronique)
####  Create table I want
chronic_stress=c(rep("yes", 8), rep("no", 8), rep("yes", 8), rep("no", 8))
boldorshy_based_on_median=c(rep(c(rep("bold", 4), rep("shy", 4)), 4))
CONDITION=c(rep("11", 16), rep("13.5", 16))
wanted = data.frame(chronic_stress=chronic_stress, CONDITION=CONDITION, boldorshy_based_on_median=boldorshy_based_on_median)
wantedtot=wanted
wantedtot$BAC.ECOTOL2=10
for (BAC.ECOTOL2 in c(11:12)){
wantedtemp=wanted
wantedtemp$BAC.ECOTOL2=BAC.ECOTOL2
wantedtot=rbind(wantedtot,
wantedtemp)
}
wantedtot$testnum = rep(1:12, each=8)
####  Put in each line of wantedtot a TAG number still available and having the correct details
wantedtot$TAG="NA"
tempdispo=dispo
for (i in c(1:nrow(wantedtot))){
avail=tempdispo[which(tempdispo$CONDITION==as.character(wantedtot[i, "CONDITION"]) &
tempdispo$chronic_stress==wantedtot[i, "chronic_stress"] &
tempdispo$boldorshy_based_on_median==wantedtot[i, "boldorshy_based_on_median"]&
tempdispo$BAC.ECOTOL2==wantedtot[i, "BAC.ECOTOL2"]),]
pickrandom=sample(avail$TAG, 1)
wantedtot[i,"TAG"]=pickrandom
tempdispo=tempdispo[-which(tempdispo$TAG==pickrandom),]
}
length(unique(wantedtot$TAG))
# Verif
temp=merge(dispo, wantedtot)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
# save
# write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
rm(list=ls())
cat("\014")  # To clear the console
# dir="/Users/Bastien/Google Drive/Post doc ifremer/SUSHIFISH/WP2 et 3"
dir=dirname(rstudioapi::getActiveDocumentContext()$path)     # gets the name of the directory of the active script (works only in R studio)
dir=gsub("/SCRIPTS R/Data management", "", dir)
fish=read.table(paste(dir, "/Managed data/history.txt", sep=""), sep="\t", dec=",", header=T)
length(fish[which(!is.na(fish$BAC.ECOTOL2)),1])
############################ Remove dead fish
fish$dead=NA
fish[grep("65986972", fish$TAG), "dead"]="20.10.2017"
fish[grep("3831213|3588164", fish$TAG), "dead"]="23.10.2017"
fish[grep("6438984|65986707|6461887", fish$TAG), "dead"]="24.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("365987312|6462437", fish$TAG), "dead"]="15.11.2017"
fish[grep("365987673", fish$TAG), "dead"]="17.11.2017"
fish[grep("3831570", fish$TAG), "dead"]="23.11.2017"
fish[grep("3831489", fish$TAG), "dead"]="24.11.2017"
fish[grep("365986732|6452560", fish$TAG), "dead"]="29.11.2017"
fish[grep("365986864", fish$TAG), "dead"]="30.11.2017"
fish[grep("6457385", fish$TAG), "dead"]="01.12.2017"
fish[grep("6564712", fish$TAG), "dead"]="04.12.2017"
fish[grep("3588112", fish$TAG), "dead"]="05.12.2017"
fish[grep("3717270|365986408", fish$TAG), "dead"]="07.12.2017"
fish[grep("6429199|365987186", fish$TAG), "dead"]="11.12.2017"
dispo=fish[which(!is.na(fish$BAC.ECOTOL2)),]
dispo=dispo[which(is.na(dispo$dead)),]
############################ Repartition pour tracking (8 par condition 11 et 13 et par stress chronique)
####  Create table I want
chronic_stress=c(rep("yes", 8), rep("no", 8), rep("yes", 8), rep("no", 8))
boldorshy_based_on_median=c(rep(c(rep("bold", 4), rep("shy", 4)), 4))
CONDITION=c(rep("11", 16), rep("13.5", 16))
wanted = data.frame(chronic_stress=chronic_stress, CONDITION=CONDITION, boldorshy_based_on_median=boldorshy_based_on_median)
wantedtot=wanted
wantedtot$BAC.ECOTOL2=10
for (BAC.ECOTOL2 in c(11:12)){
wantedtemp=wanted
wantedtemp$BAC.ECOTOL2=BAC.ECOTOL2
wantedtot=rbind(wantedtot,
wantedtemp)
}
wantedtot$testnum = rep(1:12, each=8)
####  Put in each line of wantedtot a TAG number still available and having the correct details
wantedtot$TAG="NA"
tempdispo=dispo
for (i in c(1:nrow(wantedtot))){
avail=tempdispo[which(tempdispo$CONDITION==as.character(wantedtot[i, "CONDITION"]) &
tempdispo$chronic_stress==wantedtot[i, "chronic_stress"] &
tempdispo$boldorshy_based_on_median==wantedtot[i, "boldorshy_based_on_median"]&
tempdispo$BAC.ECOTOL2==wantedtot[i, "BAC.ECOTOL2"]),]
pickrandom=sample(avail$TAG, 1)
wantedtot[i,"TAG"]=pickrandom
tempdispo=tempdispo[-which(tempdispo$TAG==pickrandom),]
}
length(unique(wantedtot$TAG))
# Verif
temp=merge(dispo, wantedtot)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
# save
# write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
rm(list=ls())
cat("\014")  # To clear the console
# dir="/Users/Bastien/Google Drive/Post doc ifremer/SUSHIFISH/WP2 et 3"
dir=dirname(rstudioapi::getActiveDocumentContext()$path)     # gets the name of the directory of the active script (works only in R studio)
dir=gsub("/SCRIPTS R/Data management", "", dir)
fish=read.table(paste(dir, "/Managed data/history.txt", sep=""), sep="\t", dec=",", header=T)
length(fish[which(!is.na(fish$BAC.ECOTOL2)),1])
############################ Remove dead fish
fish$dead=NA
fish[grep("65986972", fish$TAG), "dead"]="20.10.2017"
fish[grep("3831213|3588164", fish$TAG), "dead"]="23.10.2017"
fish[grep("6438984|65986707|6461887", fish$TAG), "dead"]="24.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("6554127", fish$TAG), "dead"]="27.10.2017"
fish[grep("365987312|6462437", fish$TAG), "dead"]="15.11.2017"
fish[grep("365987673", fish$TAG), "dead"]="17.11.2017"
fish[grep("3831570", fish$TAG), "dead"]="23.11.2017"
fish[grep("3831489", fish$TAG), "dead"]="24.11.2017"
fish[grep("365986732|6452560", fish$TAG), "dead"]="29.11.2017"
fish[grep("365986864", fish$TAG), "dead"]="30.11.2017"
fish[grep("6457385", fish$TAG), "dead"]="01.12.2017"
fish[grep("6564712", fish$TAG), "dead"]="04.12.2017"
fish[grep("3588112", fish$TAG), "dead"]="05.12.2017"
fish[grep("3717270|365986408", fish$TAG), "dead"]="07.12.2017"
fish[grep("6429199|365987186", fish$TAG), "dead"]="11.12.2017"
dispo=fish[which(!is.na(fish$BAC.ECOTOL2)),]
dispo=dispo[which(is.na(dispo$dead)),]
############################ Repartition pour tracking (8 par condition 11 et 13 et par stress chronique)
####  Create table I want
chronic_stress=c(rep("yes", 8), rep("no", 8), rep("yes", 8), rep("no", 8))
boldorshy_based_on_median=c(rep(c(rep("bold", 4), rep("shy", 4)), 4))
CONDITION=c(rep("11", 16), rep("13.5", 16))
wanted = data.frame(chronic_stress=chronic_stress, CONDITION=CONDITION, boldorshy_based_on_median=boldorshy_based_on_median)
wantedtot=wanted
wantedtot$BAC.ECOTOL2=10
for (BAC.ECOTOL2 in c(11:12)){
wantedtemp=wanted
wantedtemp$BAC.ECOTOL2=BAC.ECOTOL2
wantedtot=rbind(wantedtot,
wantedtemp)
}
wantedtot$testnum = rep(1:12, each=8)
####  Put in each line of wantedtot a TAG number still available and having the correct details
wantedtot$TAG="NA"
tempdispo=dispo
for (i in c(1:nrow(wantedtot))){
avail=tempdispo[which(tempdispo$CONDITION==as.character(wantedtot[i, "CONDITION"]) &
tempdispo$chronic_stress==wantedtot[i, "chronic_stress"] &
tempdispo$boldorshy_based_on_median==wantedtot[i, "boldorshy_based_on_median"]&
tempdispo$BAC.ECOTOL2==wantedtot[i, "BAC.ECOTOL2"]),]
pickrandom=sample(avail$TAG, 1)
wantedtot[i,"TAG"]=pickrandom
tempdispo=tempdispo[-which(tempdispo$TAG==pickrandom),]
}
length(unique(wantedtot$TAG))
# Verif
temp=merge(dispo, wantedtot)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
# save
# write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
temp=merge(dispo, wantedtot, all.x=T)
aggregate(time_risktaking~CONDITION*chronic_stress*BAC.ECOTOL2, FUN=mean, data=temp)
write.table(temp, paste(dir, "repartition_tracking 122017.txt", sep=""), sep="\t", row.names=F)
